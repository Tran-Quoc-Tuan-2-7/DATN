@model IEnumerable<ProductModel>
<div class="col-sm-3">
	<partial name="_SideBarPartial" />
</div>
<style>
	.product-image-wapper {
		height: 450px;
	}
</style>

<div class="col-sm-9 padding-right">
	<partial name="_FilterProductsPartial" />

	<div class="features_items">
		<!--features_items-->
		<h2 class="title text-center">@ViewBag.Slug</h2>
		@foreach (var item in Model)

		{
			<div class="col-sm-4">
				<div class="product-image-wrapper">
					<a asp-action="Details" asp-controller="Product" asp-route-id="@item.Id">
						<div class="single-products">
							<div class="productinfo text-center">
								<img src="~/media/products/@item.Image" alt="@item.Name" width="100%" />
								<h2>@item.Price.ToString("#, ##0 VNĐ")</h2>
								<p>@item.Name</p>
								<p>Danh mục: @item.Category.Name</p>
								<p>Thương hiệu: @item.Brand.Name</p>
								@if (item.Quantity > 0)
								{
									<button type="button" class="btn btn-default cart add-to-cart" data-product-id="@item.Id">
										<i class="fa fa-shopping-cart"></i> Thêm giỏ hàng
									</button>
								}
								else
								{
									<button type="button" class="btn btn-default">
										<i class="fa fa-shopping-cart"></i> Hết hàng
									</button>
								}
							</div>

						</div>
					</a>
					<div class="choose">
						<ul class="nav nav-pills nav-justified">
							<li><a href="#"><i class="fa fa-plus-square"></i>Add to wishlist</a></li>
							<li><a href="#"><i class="fa fa-plus-square"></i>Add to compare</a></li>
						</ul>
					</div>
				</div>
			</div>
		}
@section Scripts {
			<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
			<script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
			<script>
							$(document).ready(function () {
					// Slider giá
					$("#slider-range").slider({
						range: true,
						step: 100000,
						min: 10000000,
						max: 100000000,
						values: [10000000, 50000000],
						slide: function (event, ui) {
							$("#amount").val(
								new Intl.NumberFormat('vn-VN', {style: 'currency', currency: 'VND'})
								.format(ui.values[0])
								+ " - " + new Intl.NumberFormat('vn-VN', {style: 'currency', currency: 'VND'})
								.format(ui.values[1]))
						}
					});

					$("#amount").val(
						new Intl.NumberFormat('vn-VN', {style: 'currency', currency: 'VND'})
								.format($("#slider-range").slider("values", 0)) 
								+
						" - " + new Intl.NumberFormat('vn-VN', {style: 'currency', currency: 'VND'})
								.format($("#slider-range").slider("values", 1))) ;

					// Button lọc giá
					$('.btn-locgia').on('click', function () {
						var url = $(this).data("current_url");

						if (url) {
							window.location = url + "?startprice=" + $("#slider-range").slider("values", 0)
								+ "&endprice=" + $("#slider-range").slider("values", 1);
						}

						return false;
					});

					// Dropdown sắp xếp
					$('#sort_by').on('change', function () {
						var url = $(this).val();
						if (url) {
							window.location = url;
						}
						return false;
					});
				});
			</script>
}